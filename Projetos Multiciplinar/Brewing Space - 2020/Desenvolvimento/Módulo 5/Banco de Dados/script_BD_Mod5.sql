/* Mod05_Administrativo_Logico: */

CREATE TABLE USUARIOS (
    USU_ID INTEGER PRIMARY KEY AUTO_INCREMENT,
    USU_NOME VARCHAR(100),
    USU_EMAIL VARCHAR(255),
    USU_CPF VARCHAR(11)
);

CREATE TABLE ADMNISTRADORES (
    ADM_ID INTEGER PRIMARY KEY AUTO_INCREMENT,
    ADM_NOME VARCHAR(100),
    ADM_EMAIL VARCHAR(255),
    ADM_CPF VARCHAR(11)
);

CREATE TABLE MENSALIDADES (
    MEN_ID INTEGER PRIMARY KEY AUTO_INCREMENT,
    MEN_DATA_PAGAMENTO DATE,
    MEN_VALOR_PLANO DECIMAL(5,2),
    FK_ADMNISTRADORES_ADM_ID INTEGER,
    FK_ASSINATURAS_USUARIOS_PLANOS_USUARIOS_ASU_ID INTEGER
);

CREATE TABLE PLANOS (
    PLA_ID INTEGER PRIMARY KEY AUTO_INCREMENT,
    PLA_DESCRICAO VARCHAR(500),
    PLA_NOME VARCHAR(20),
    PLA_VALOR DECIMAL(5,2),
    FK_ADMNISTRADORES_ADM_ID INTEGER
);

CREATE TABLE ASSINATURAS_USUARIOS_PLANOS_USUARIOS (
    ASU_ID INTEGER PRIMARY KEY AUTO_INCREMENT,
    ASU_DATA_ASSINATURA DATE,
    FK_PLANOS_PLA_ID INTEGER,
    FK_USUARIOS_USU_ID INTEGER
);

CREATE TABLE AJUSTE_DENSIDADE (
    AJD_TEMPERATURA DECIMAL(5,2),
    AJD_CORRECAO DECIMAL(5,2),
    AJD_ID INTEGER PRIMARY KEY AUTO_INCREMENT
);

CREATE TABLE ADMINISTRADORES_USUARIOS (
    FK_ADMNISTRADORES_ADM_ID INTEGER,
    FK_USUARIOS_USU_ID INTEGER,
    ADU_ID INTEGER PRIMARY KEY AUTO_INCREMENT
);
 
ALTER TABLE MENSALIDADES ADD CONSTRAINT FK_MENSALIDADES_2
    FOREIGN KEY (FK_ADMNISTRADORES_ADM_ID)
    REFERENCES ADMNISTRADORES (ADM_ID)
    ON DELETE CASCADE;
 
ALTER TABLE MENSALIDADES ADD CONSTRAINT FK_MENSALIDADES_3
    FOREIGN KEY (FK_ASSINATURAS_USUARIOS_PLANOS_USUARIOS_ASU_ID)
    REFERENCES ASSINATURAS_USUARIOS_PLANOS_USUARIOS (ASU_ID)
    ON DELETE CASCADE;
 
ALTER TABLE PLANOS ADD CONSTRAINT FK_PLANOS_2
    FOREIGN KEY (FK_ADMNISTRADORES_ADM_ID)
    REFERENCES ADMNISTRADORES (ADM_ID)
    ON DELETE CASCADE;
 
ALTER TABLE ASSINATURAS_USUARIOS_PLANOS_USUARIOS ADD CONSTRAINT FK_ASSINATURAS_USUARIOS_PLANOS_USUARIOS_2
    FOREIGN KEY (FK_PLANOS_PLA_ID)
    REFERENCES PLANOS (PLA_ID);
 
ALTER TABLE ASSINATURAS_USUARIOS_PLANOS_USUARIOS ADD CONSTRAINT FK_ASSINATURAS_USUARIOS_PLANOS_USUARIOS_3
    FOREIGN KEY (FK_USUARIOS_USU_ID)
    REFERENCES USUARIOS (USU_ID);
 
ALTER TABLE ADMINISTRADORES_USUARIOS ADD CONSTRAINT FK_ADMINISTRADORES_USUARIOS_2
    FOREIGN KEY (FK_ADMNISTRADORES_ADM_ID)
    REFERENCES ADMNISTRADORES (ADM_ID)
    ON DELETE RESTRICT;
 
ALTER TABLE ADMINISTRADORES_USUARIOS ADD CONSTRAINT FK_ADMINISTRADORES_USUARIOS_3
    FOREIGN KEY (FK_USUARIOS_USU_ID)
    REFERENCES USUARIOS (USU_ID)
    ON DELETE SET NULL;
	
	INSERT INTO AJUSTE_DENSIDADE (AJD_TEMPERATURA, AJD_CORRECAO)
	VALUES 
	(1,-1.9),(2,-1.9),(3,-1.8),(4,-1.8),(5,-1.8),
	(6,-1.7), (7,-1.7),(8,-1.6),(9,-1.6),(10,-1.5),
	(11,-1.4),(12,-1.3),(13,-1.2),(14,-1.1),(15,-0.9),
	(16,-0.8),(17,-0.6),(18,-0.4),(19,-0.2),(20,0.0),
	(21, 0.2),(22,0.4) ,(23,0.6),(24,0.9),(25,1.1), 
	(26,1.4),(27,1.6),(28,1.9),(29,2.2),(30,2.5),
	(31,2.8),(32,3.1),(33,3.4),(34,3.7),(35,4.1),
	(36,4.4),(37,4.8),(38,5.1),(39,5.5),(40,5.9),
	(41,6.2),(42,6.6),(43,7.0),(44,7.4),(45,7.8),
	(46,8.3),(47,8.7),(48,9.1),(49,9.5),(50,10.0),
	(51,10.4),(52,10.9),(53,11.4),(54,11.8),(55,12.3),
	(56,12.8),(57,13.3),(58,13.8),(59,14.3),(60,14.8),
	(61,15.3),(62,15.8),(63,16.4),(64,16.9),(65,17.5),
	(66,18.0),(67,18.6),(68,19.1),(69,19.7),(70,20.3),
	(71,20.8),(72,21.4),(73,22.0),(74,22.6),(75,23.2),
	(76,23.8),(77,24.4),(78,25.0),(79,25.7),(80,26.3),
	(81,26.9),(82,27.6),(83,28.2),(84,28.9),(85,29.5),
	(86,30.2),(87,30.9);